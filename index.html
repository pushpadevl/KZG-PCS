<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Interactive Notes Site</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <style>
    ::-webkit-scrollbar {
      width: 6px;
    }
    ::-webkit-scrollbar-thumb {
      background: #bbb;
      border-radius: 6px;
    }
  </style>
</head>
<body class="bg-gray-100 text-gray-900 font-sans" x-data="notesApp()">

<div class="flex h-screen relative">
  <!-- Topics Sidebar -->
  <div :class="expandedTopic ? 'w-64' : 'w-16'" class="bg-gray-800 text-gray-100 p-2 transition-all duration-300 ease-in-out relative z-0">
    <div class="flex items-center justify-between px-2 relative">
      <h1 x-show="expandedTopic" class="text-2xl font-bold mb-4">ðŸ“˜ Topics</h1>
    </div>
    <ul class="space-y-2 mt-6">
      <template x-for="(topic, key) in topics" :key="key">
        <li>
          <button @click="handleTopicClick(key)"
                  :class="selectedTopic === key ? 'bg-gray-700 text-white' : 'hover:bg-gray-700 hover:text-white'"
                  class="w-full text-left text-lg font-medium px-3 py-2 rounded transition flex items-center space-x-2">
            <span x-show="expandedTopic" x-text="topic.name"></span>
            <span x-show="!expandedTopic" x-text="topic.name.substring(0,2)"></span>
          </button>
        </li>
      </template>
    </ul>
  </div>

  <!-- Max/Min Button -->
  <div class="absolute top-1/2 -translate-y-1/2 z-10 transition-all duration-300 ease-in-out"
       :class="expandedTopic ? 'left-64' : 'left-16'">
    <button @click="expandedTopic = !expandedTopic"
            class="px-2 py-1 bg-gray-600 text-white rounded hover:bg-gray-500 transition">
      //
    </button>
  </div>

  <!-- Subtopics Sidebar -->
  <div class="w-64 bg-gray-700 text-white p-4 overflow-y-auto" x-show="selectedTopic">
    <h2 class="text-xl font-semibold mb-4" x-text="topics[selectedTopic].name"></h2>
    <ul class="space-y-2">
      <template x-for="(subtopic, index) in topics[selectedTopic].subtopics" :key="index">
        <li>
          <button @click="selectSubtopic(index)"
                  class="w-full text-left bg-gray-600 hover:bg-gray-500 px-3 py-2 rounded transition">
            <span x-text="subtopic.name"></span>
          </button>
        </li>
      </template>
    </ul>
  </div>

  <!-- Main Content Area -->
  <div class="flex-1 p-6 overflow-auto">
    <template x-if="!selectedTopic">
      <div class="text-gray-700">
        <h2 class="text-3xl font-bold mb-4">Welcome to My Notes Site</h2>
        <img src="https://picsum.photos/seed/me/200/200" class="rounded-full w-32 h-32 mb-4" alt="My Photo">
        <p class="text-lg">Hi, I'm [Your Name], a passionate learner and educator. Here you'll find organized notes on topics like Mathematics, Algorithms, Cryptography and more. Use the sidebar to explore each category.</p>
      </div>
    </template>

    <template x-if="selectedTopic && selectedSubtopic !== null">
      <div>
        <h2 class="text-2xl font-bold mb-4" x-text="topics[selectedTopic].subtopics[selectedSubtopic].name + ' â†’'"></h2>
        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
          <template x-for="(file, idx) in topics[selectedTopic].subtopics[selectedSubtopic].files" :key="idx">
            <a :href="file.path" target="_blank" class="bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-2xl transition relative group">
              <img :src="file.thumbnail" alt="Thumbnail" class="w-full h-40 object-cover" />
              <div class="p-3 bg-gray-800 text-white text-center text-lg" x-text="file.name"></div>
              <div class="absolute inset-0 bg-black bg-opacity-70 opacity-0 group-hover:opacity-100 transition flex items-center justify-center text-white text-sm p-4 text-center" x-text="file.caption"></div>
            </a>
          </template>
        </div>
      </div>
    </template>
  </div>
</div>

<script>
function notesApp() {
  return {
    expandedTopic: true,
    selectedTopic: null,
    selectedSubtopic: null,
    topics: {
      math: {
        name: 'Mathematics',
        subtopics: [
          {
            name: 'Elliptic Curves',
            files: [
              {
                name: 'Introduction',
                path: './elliptic_curves.pdf',
                thumbnail: 'https://picsum.photos/id/1018/300/180',
                caption: 'Basics of elliptic curves'
              },
              {
                name: 'Pairings',
                path: './pairings.pdf',
                thumbnail: 'https://picsum.photos/id/1015/300/180',
                caption: 'Pairings over elliptic curves'
              }
            ]
          }
        ]
      },
      algo: {
        name: 'Algorithms',
        subtopics: [
          {
            name: 'Sorting',
            files: [
              {
                name: 'QuickSort',
                path: './quicksort.pdf',
                thumbnail: 'https://picsum.photos/id/1005/300/180',
                caption: 'Quick sort algorithm'
              }
            ]
          }
        ]
      }
    },
    toggleTopic(topicKey) {
      if (this.selectedTopic === topicKey) {
        this.selectedTopic = null;
        this.expandedTopic = true;
      } else {
        this.selectedTopic = topicKey;
        this.selectedSubtopic = null;
        this.expandedTopic = false;
      }
    },
    handleTopicClick(topicKey) {
      if (!this.expandedTopic) {
        this.expandedTopic = true;
      } else if (this.selectedTopic === topicKey) {
        this.expandedTopic = true;
      } else {
        this.selectedTopic = topicKey;
        this.selectedSubtopic = null;
        this.expandedTopic = false;
      }
    },
    selectSubtopic(index) {
      this.selectedSubtopic = index;
    }
  };
}
</script>

</body>
</html>
